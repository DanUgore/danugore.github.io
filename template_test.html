<!DOCTYPE html>
<html>
	<head>
		<script src="./lib/jquery-1.11.1.min.js"></script>
		<script src="text-formatter.js"></script>
	</head>
	<body>
	A simple templating engine.
	<button onclick="parseInput()">Template!</button><button onclick="restoreInput()">Restore!</button><br />
	<textarea id="tmp" style="width: 48%; height: 500px;"></textarea>
	<textarea id="ph" style="width: 48%; height: 500px; white-space: nowrap;"></textarea>
	<div id="error" style="color: red;"></div>
	<script>
	template = ""; parsed = ""; json = "";
	$('#tmp').focus();
	$('#tmp').val("This placeholder will resolve to {{placeholder}}!");
	$('#ph').val("{\n  \"placeholder\": \"My Own Message\",\n  \"unused\": \"\"\n}");
	function parseInput() {
		if (parsed === $('#tmp').val() && json === $('#ph').val()) return;
		var placeholders;
		try {
			placeholders = JSON.parse(json);
			$('#error').text("");
		} catch (e) {
			$('#error').text(e.name+": "+e.message);
			return;
		}
		template = $('#tmp').val();
		json = $('#ph').val();
		parsed = fillTemplate(template, JSON.parse(json));
		$('#tmp').val(parsed);
	}
	function restoreInput() {
	  $('#tmp').val(template);
	}
	</script>
	</body>
</html>
